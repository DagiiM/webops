<header class="webops-header">
                <!-- Mobile Sidebar Toggle -->
                <button class="webops-sidebar-toggle" id="sidebar-toggle">
                    <span class="material-icons" style="font-size: 20px;">menu</span>
                </button>

                <div class="webops-header__title">{% block header_title %}{% endblock %}</div>
                <div class="webops-header__actions">
                    {% if user.is_authenticated %}
                    
                    <!-- Unified Theme Switcher -->
                    <div class="webops-theme-switcher">
                        <button 
                            class="webops-theme-toggle" 
                            id="themeToggle"
                            aria-label="Switch theme"
                            aria-expanded="false"
                            aria-haspopup="true"
                        >
                            <svg class="webops-theme-toggle__icon webops-theme-toggle__icon--dark" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                            <svg class="webops-theme-toggle__icon webops-theme-toggle__icon--light" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="5"></circle>
                                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
                            </svg>
                            <svg class="webops-theme-toggle__icon webops-theme-toggle__icon--custom" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                            </svg>
                            <svg class="webops-theme-toggle__icon webops-theme-toggle__icon--high-contrast" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 2a10 10 0 0 0 0 20z"></path>
                            </svg>
                            <span class="webops-theme-toggle__label">Dark</span>
                            <svg class="webops-theme-toggle__arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6,9 12,15 18,9"></polyline>
                            </svg>
                        </button>
                        
                        <div class="webops-theme-dropdown" id="themeDropdown" role="menu" aria-labelledby="themeToggle">
                            <button class="webops-theme-option webops-theme-option--active" data-theme="dark" role="menuitem">
                                <span class="webops-theme-option__preview webops-theme-option__preview--dark"></span>
                                <span class="webops-theme-option__label">Dark</span>
                            </button>
                            <button class="webops-theme-option" data-theme="light" role="menuitem">
                                <span class="webops-theme-option__preview webops-theme-option__preview--light"></span>
                                <span class="webops-theme-option__label">Light</span>
                            </button>
                            <button class="webops-theme-option" data-theme="custom" role="menuitem">
                                <span class="webops-theme-option__preview webops-theme-option__preview--custom"></span>
                                <span class="webops-theme-option__label">Custom</span>
                            </button>
                            <button class="webops-theme-option" data-theme="high-contrast" role="menuitem">
                                <span class="webops-theme-option__preview webops-theme-option__preview--high-contrast"></span>
                                <span class="webops-theme-option__label">High Contrast</span>
                            </button>
                        </div>
                    </div>

                    <!-- Settings Button -->
                    <button class="webops-settings-button" id="settingsButton" aria-label="Open settings">
                        <svg class="webops-settings-button__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                        </svg>
                    </button>

                    <!-- User Menu -->
                    <div class="webops-user-menu">
                        <button 
                            class="webops-user-menu__trigger" 
                            id="userMenuTrigger"
                            aria-label="Open user menu"
                            aria-expanded="false"
                            aria-haspopup="true"
                        >
                            <div class="webops-user-menu__avatar">{{ user.username|slice:":1"|upper }}</div>
                            <span class="webops-user-menu__name">{{ user.username }}</span>
                            <svg class="webops-user-menu__arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6,9 12,15 18,9"></polyline>
                            </svg>
                        </button>
                        
                        <div class="webops-user-menu__dropdown" id="userDropdown" role="menu" aria-labelledby="userMenuTrigger">
                            <div class="webops-user-menu__header">
                                <div class="webops-user-menu__avatar--large">{{ user.username|slice:":1"|upper }}</div>
                                <div class="webops-user-menu__info">
                                    <div class="webops-user-menu__display-name">{{ user.username }}</div>
                                    <div class="webops-user-menu__email">{{ user.email|default:user.username }}</div>
                                </div>
                            </div>
                            
                            <div class="webops-user-menu__divider"></div>
                            
                            <a href="{% url 'two_factor_setup' %}" class="webops-user-menu__item" role="menuitem">
                                <svg class="webops-user-menu__item-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <circle cx="12" cy="16" r="1"></circle>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                                <span class="webops-user-menu__item-label">Two-Factor Auth</span>
                            </a>
                            
                            <a href="{% url 'api_docs' %}" class="webops-user-menu__item" role="menuitem">
                                <svg class="webops-user-menu__item-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="16,18 22,12 16,6"></polyline>
                                    <polyline points="8,6 2,12 8,18"></polyline>
                                </svg>
                                <span class="webops-user-menu__item-label">API Documentation</span>
                            </a>
                            
                            <button class="webops-user-menu__item" id="userSettingsButton" role="menuitem">
                                <svg class="webops-user-menu__item-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"></circle>
                                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                </svg>
                                <span class="webops-user-menu__item-label">Settings</span>
                            </button>
                            
                            <div class="webops-user-menu__divider"></div>
                            
                            <a href="{% url 'logout' %}" class="webops-user-menu__item webops-user-menu__item--danger" role="menuitem">
                                <svg class="webops-user-menu__item-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                    <polyline points="16,17 21,12 16,7"></polyline>
                                    <line x1="21" y1="12" x2="9" y2="12"></line>
                                </svg>
                                <span class="webops-user-menu__item-label">Sign Out</span>
                            </a>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </header>